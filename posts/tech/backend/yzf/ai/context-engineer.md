---
title: '上下文工程'
titleJp: ''
date: '2025-12-08'
excerpt: ''
tags: ["Agent"]
---
## 上下文缓存

> https://www.volcengine.com/docs/82379/1398933?lang=zh



上下文缓存主要分为 Session 缓存（会话缓存）和前缀缓存（Prefix Cache）两种类型。

这两者的核心区别在于 **缓存内容是否会随着对话动态更新**。


### Session Cache


### Prefix Cache

主要适用场景如下：
- 文档问答场景（RAG）：上传一本《红楼》或企业员工手册（几万字），然后让不同的用户针对这本书提问。书的内容不变，只是问题在变。
- Few-Shot Prompting：设定复杂的 System Prompt，包含几十个示例（Few-shot examples），这些示例在每次请求中都是固定的。
- 角色扮演的人设：设定一个极其复杂的角色背景（几千字），这个背景对所有用户都是一样的。

可以看到，优点主要体现在：复用性，省钱，首字延迟低。

但同样也伴随着一些缺点：内容是不能变的，无记忆性。

一旦创建，如果文档里有个错别字，必须重新创建新的缓存，无法增量修改。它只记住了开头，记不住“刚才聊了什么”。如果需要记住后续对话，还得客户端自己传历史记录（或者结合 Session 缓存使用，但目前 API 通常只能选其一模式）。


