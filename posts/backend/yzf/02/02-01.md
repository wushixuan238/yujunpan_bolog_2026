---
id: '322283'
title: '云帐房LANDING1月最后一周复盘'
titleJp: '云帐房LANDING1月最后一周复盘'
date: '2026.02.01'
excerpt: '云帐房LANDING1月最后一周复盘'
tags: ['yzf']
---

# 技术上获得的收获


- Redis 明确禁止使用 `KEYS` 命令。

以下是主要原因：

#### 1. Redis 是单线程模型的“受害者”

Redis 的核心处理网络请求和执行命令是**单线程**的。这意味着在同一时刻，Redis 只能处理一个命令。

* **阻塞效应**：`KEYS` 命令需要遍历整个数据库。如果你的 Key 数量级达到了百万、千万甚至更多，这个遍历过程会非常耗时。
* **全家桶停摆**：当 Redis 正在执行这个耗时的 `KEYS` 时，其他所有的读写请求（比如用户的登录、订单查询）都会被排在后面。在用户看来，就是你的系统**卡死了**，甚至可能导致分布式锁失效、数据库连接池爆满等连锁反应。

#### 2. 性能与内存消耗

* **复杂度高**：`KEYS` 的时间复杂度是 ，其中  是数据库中 Key 的总数。
* **网络带宽压力**：如果匹配到的 Key 非常多，Redis 需要一次性将成千上万个字符串通过网络返回给客户端，这会瞬间撑爆网卡带宽。

---

#### 应该用什么代替？

如果业务上确实需要模糊搜索 Key，通常会采用以下方案：

* **使用 SCAN 命令**：
这是最标准的替代方案。`SCAN` 是基于**游标**（Cursor）的迭代。它每次只返回一小部分数据，不会阻塞服务器。虽然它可能需要多次往返，但它保证了 Redis 的高可用性。
> 复杂度同样是 ，但它是“分期付款”，不会导致系统停跳。